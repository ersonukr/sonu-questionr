<% if notice || alert %>
  <div class="alert alert-dismissible alert-<%=notice ? 'success' : 'danger'%> col-lg-12">
  	<button type="button" class="close" data-dismiss="alert">Ã—</button>
  	<%= notice || alert %>
  </div>
<% end %>
<h1 class="col-lg-12">The Answers</h1>
<div class="ansbgq input-group" id="stbrowse">
  <%= form_tag("/search", :method=>"get") do %>
    <div class="col-lg-2">Candidate Name<br>
      <input name="q" type="text" class="form-control" placeholder="Candidate Name"/>
    </div>
    <div class="col-lg-2">Events<br>
      <input name="e" type="text" class="form-control" placeholder="Events"/>
    </div>
    <div class=" col-lg-3">
      <div id="event-day-date" class="input-group">
        Events Date<br>
        <input name="d" type="text" class="datepicker form-control" placeholder="Events Date" id="event_day_date"/>
        <span class="input-group-addon">
          <span class="glyphicon glyphicon-calendar"></span>
        </span>
      </div>
    </div>
    <div class="col-lg-2">Venues<br>
      <input name="v" type="text" class="form-control" placeholder="Venues"/>
    </div>
    <!-- <span class="input-group-btn "> -->
      <div class="col-lg-2">
        <input type="submit" value="Search" class="btn btn-info candbgq12"/>
      </div>
    <!-- </span> -->
  <% end %>

</div>
<h3 class="col-lg-offset-6 col-lg-2"> Result(s): <span id="searchResult"></span></h3>

<div class="col-lg-12" style="margin-top: 20px">
  <% if @statements.blank? %>
    <div class="warning">Sorry, We don't found any result.</div>
  <% else %>
    <table class="table table-striped table-hover">
      <thead>
        <tr>
          <th>Candidate(s)</th>
          <th>Speaker(s)</th>
          <th>Event Name</th>
          <th>Location</th>
          <th>Public</th>
          <th>Date</th>
        </tr>
      </thead>
      <tbody>
      <% @statements.each do |statement| %>
        <% if search_filter(statement) %>
          <tr class="search_row">
            <td><%= link_to(statement.candidate.person_name, statement.candidate)%></td>
            <% statement.candidate.events.each do |event| %>
            <td><%= event.format_speakers %></td>
            <td><%= link_to event.title, event %></td>
            <td><%= event.format_location %></td>
            <td><%= event.public? ? 'Yes' : 'No' %></td>
            <% end %>
            <td><%= statement.event_day.date.strftime("%m/%d/%Y") if statement.event_day.present? %></td>
          </tr>
        <% end %>
      <% end %>
      </tbody>
    </table>
  <% end %>
</div>

<script>$('#searchResult').html($(".search_row").length)</script>
<script>
  $('#event-day-date').datetimepicker({
    format: 'MM/DD/YYYY'
  });
</script>